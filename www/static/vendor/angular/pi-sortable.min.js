angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(a,b,c){return{require:"?ngModel",link:function(d,e,f,g){function h(a,b){return b&&"function"==typeof b?function(c,d){a(c,d),b(c,d)}:a}var i,j={},k={receive:null,remove:null,start:null,stop:null,update:null};angular.extend(j,a),g?(d.$watch(f.ngModel+".length",function(){b(function(){e.sortable("refresh")})}),k.start=function(a,b){b.item.sortable={index:b.item.index()}},k.activate=function(){i=e.contents();var a=e.sortable("option","placeholder");a&&a.element&&(i=i.not(e.find("."+a.element().attr("class").split(/\s+/).join("."))))},k.update=function(a,b){b.item.sortable.received||(b.item.sortable.dropindex=b.item.index(),e.sortable("cancel")),i.detach().appendTo(e),b.item.sortable.received&&d.$apply(function(){g.$modelValue.splice(b.item.sortable.dropindex,0,b.item.sortable.moved)})},k.stop=function(a,b){!b.item.sortable.received&&"dropindex"in b.item.sortable&&d.$apply(function(){g.$modelValue.splice(b.item.sortable.dropindex,0,g.$modelValue.splice(b.item.sortable.index,1)[0])})},k.receive=function(a,b){b.item.sortable.received=!0},k.remove=function(a,b){d.$apply(function(){b.item.sortable.moved=g.$modelValue.splice(b.item.sortable.index,1)[0]})},d.$watch(f.uiSortable,function(a){angular.forEach(a,function(a,b){k[b]&&("stop"===b&&(a=h(a,function(){d.$apply()})),a=h(k[b],a)),e.sortable("option",b,a)})},!0),angular.forEach(k,function(a,b){j[b]=h(a,j[b])})):c.info("ui.sortable: ngModel not provided!",e),e.sortable(j)}}}]);