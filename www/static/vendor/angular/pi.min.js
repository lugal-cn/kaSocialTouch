angular.module("pi",[]).directive("piUnique",["$http","$timeout","$parse",function(a,b,c){function d(d,e,f,g){var j,h=c(f.piUnique)(d),i={};if(!h)throw new Error("Please set url value on pi-unique attribute");d.$watch(f.ngModel,function(c){c&&(j&&b.cancel(j),i[f.name]=c,j=b(function(){a.get(h,{cache:!0,params:i}).success(function(a){g.$setValidity("unique",!a.status)})},300))})}return{require:"ngModel",link:d,restrict:"A"}}]).directive("piMatch",function(){var a=function(a,b,c,d){var e=b.inheritedData("$formController")[c.piMatch];d.$parsers.push(function(a){return a==e.$viewValue?(d.$setValidity("mismatch",!0),a):(d.$setValidity("mismatch",!1),void 0)}),e.$parsers.push(function(a){var b=d.$viewValue||"";return d.$setValidity("mismatch",a==b),a})};return{require:"ngModel",link:a,restrict:"A"}}).directive("piMessage",["$timeout","pi",function(a,b){return{template:'<div ng-show="alert" style="position: fixed; z-index: 1043; width: 60%; left: 20%; text-align: center; top: 20px"><div class="label label-{{alert.type}}" style="font-size: 16px; padding: 8px 15px; white-space: normal;"><i class="fa fa-{{alert.cls}}"></i><span style="margin-left: 10px;">{{alert.message}}</span></div></div>',restrict:"A",scope:!0,replace:!0,link:function(c,d,e){var f,g=e.time||3e3,h=b.translate.ERROR||"Connect error, Please try again later",i=b.translate.LOAD||"Loading...";c.$parent.$watch(e.piMessage,function(b){var d={};if(!angular.isUndefined(b)){if(angular.isNumber(b)&&(b={status:b}),!b)return c.alert="",void 0;switch(b.status){case 0:d.cls="minus-circle",d.message=b.message||h,d.type="danger";break;case 2:d.cls="spinner fa-spin",d.type="info",d.message=b.message||i;break;default:d.cls="check",d.type="success",d.message=b.message}f&&a.cancel(f),c.alert=d,2!=b.status&&(f=a(function(){c.alert=""},g))}})}}}]).directive("piAlert",function(){return{template:'<div ng-if="message" class="alert" ng-class="type && \'alert-\' + type"><button class="close" ng-click="close()">&times;</button>{{message}}</div>',restrict:"A",scope:{type:"=",message:"="},link:function(a){a.close=function(){a.message=""}}}}).directive("piHoverInput",function(){return{template:'<div class="pi-hover-input" ng-class="{\'pi-hover-input-editing\': editing}"><span ng-click="inputShow()">{{text}}</span><input type="text" class="form-control input-sm" ng-model="text" ng-blur="editTextAction()" ng-keypress="enterSaveAction($event)"></div>',replace:!0,scope:{text:"="},restrict:"A",controller:"piHoverInputCtrl"}}).controller("piNavTopCtrl",["$scope","$location",function(a,b){a.navClass=function(a){return b.path().substr(0,a.length)==a?"active":void 0}}]).controller("piHoverInputCtrl",["$scope","$element","$timeout","$attrs",function(a,b,c,d){function f(){a.text=a.text.trim(),a.text?a.$emit("piHoverInputSave",e):a.text=a._text,a.editing=0}var e=a.$parent[d.piHoverInput]||a.text;a._text=a.text,a.inputShow=function(){a.editing=1,c(function(){var c=b.find("input");c.val(""),c[0].focus(),c.val(a.text)},0,!1)},a.editTextAction=f,a.enterSaveAction=function(b){13==b.which&&(a.editing=0,c(function(){b.target.blur()},0,!1))}}]).provider("pi",["$httpProvider","$locationProvider",function(a,b){var c={};this.$get=function(){return{translate:function(a){var b=c[a];return b?b:a}}},this.addTranslations=function(a){angular.extend(c,a)},this.addAjaxInterceptors=function(){a.interceptors.push(["$q","$rootScope",function(a,b){return{response:function(a){var c=a.data;return angular.isObject(c)&&c.hasOwnProperty("message")&&(b.alert=c),a},responseError:function(c){var d=c.data;return b.alert={status:0,message:d.message},angular.isDefined(piLoggerSetCategoryDisplay)&&d.exception&&(document.getElementById("pi-logger-category-debug").innerHTML="<pre>"+d.exception.xdebug_message+"</pre>",piLoggerSetCategoryDisplay("debug",1)),a.reject(c)}}}])},this.setGetHeader=function(b){var b=b||{"X-Requested-With":"XMLHttpRequest",Accept:"*/*"};a.defaults.headers.get=b},this.setHashPrefix=function(a){b.hashPrefix(a||"!")}}]).filter("translate",["pi",function(a){return a.translate}]);